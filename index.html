<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Minimarket</title>
</head>

<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo">MINIMARKET</div>

            <div class="nav-section">
                <div class="nav-title">Descubre</div>
                <a href="#" class="nav-item" id="nav-inicio" onclick="showSection('inicio'); return false;">
                    <span class="nav-icon">🏠</span>
                    Inicio
                </a>
                <!-- Opción de navegación: Cajero -->
                <a href="#" class="nav-item" id="nav-cajero" onclick="showSection('cajero')">
                    <span class="nav-icon">💳</span>
                    Cajero
                </a>
                <!-- Opción de navegación: Informes -->
                <a href="#" class="nav-item" id="nav-informes" onclick="showSection('informes')">
                    <span class="nav-icon">📊</span>
                    Informes
                </a>
                <!-- Opción de navegación: Productos -->
                <a href="#" class="nav-item" id="nav-productos" onclick="showSection('productos')">
                    <span class="nav-icon">📦</span>
                    Productos
                </a>
            </div>


            <!-- Sección de navegación para proveedores y clientes -->
            <div class="nav-section">
                <div class="nav-title">Proveedores y clientes</div>
                <!-- Opción de navegación: Listado de clientes -->
                <a href="#" class="nav-item" id="nav-clientes" onclick="showSection('clientes')">
                    <span class="nav-icon">👥</span>
                    Listado de clientes
                </a>
                <!-- Opción de navegación: Listado de proveedores -->
                <a href="#" class="nav-item" id="nav-proveedor" onclick="showSection('proveedor')">
                    <span class="nav-icon">🏢</span>
                    Listado de proveedor
                </a>
            </div>
        </div>

        <div class="main-content">
            <!-- Sección Inicio -->
            <div class="section active" id="inicio-section">
                <div class="header">
                    <div class="header-top">
                        <h1 class="page-title">Inicio</h1>
                        <div class="header-actions">
                            <button class="btn btn-primary" onclick="showSection('cajero')" aria-label="Ir al cajero">Ir
                                al Cajero</button>
                        </div>
                    </div>
                </div>
                <div class="content-area">
                    <div class="welcome-section">
                        <h2 class="welcome-title">Bienvenido a MINIMARKET</h2>
                        <p class="welcome-subtitle">Administra tu negocio de manera eficiente</p>
                        <div class="quick-actions">
                            <div class="quick-action" onclick="showSection('cajero'); return false;">
                                <div class="quick-action-icon">💳</div>
                                <div class="quick-action-title">Punto de Venta</div>
                                <div class="quick-action-desc">Procesar ventas y cobros</div>
                            </div>
                            <div class="quick-action" onclick="showSection('productos'); return false;">
                                <div class="quick-action-icon">📦</div>
                                <div class="quick-action-title">Ver Productos</div>
                                <div class="quick-action-desc">Consultar inventario</div>
                            </div>
                            <div class="quick-action" onclick="showSection('informes'); return false;">
                                <div class="quick-action-icon">📊</div>
                                <div class="quick-action-title">Reportes</div>
                                <div class="quick-action-desc">Analizar ventas</div>
                            </div>
                            <div class="quick-action" onclick="showSection('clientes'); return false;">
                                <div class="quick-action-icon">👥</div>
                                <div class="quick-action-title">Clientes</div>
                                <div class="quick-action-desc">Gestionar clientes</div>
                            </div>
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalProducts">20</div>
                            <div class="stat-label">Productos en inventario</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalSales">7</div>
                            <div class="stat-label">Ventas hoy</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalRevenue">$350.00</div>
                            <div class="stat-label">Ingresos del día</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="lowStockProducts">3</div>
                            <div class="stat-label">Productos con stock bajo</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección Cajero (ya existente) -->
            <div class="section" id="cajero-section">
                <div class="header">
                    <div class="header-top">
                        <h1 class="page-title">Cajero</h1>
                        <div class="header-actions">
                            <button class="btn btn-secondary" onclick="showSalesModal()">Ver ventas realizadas</button>
                            <button class="btn btn-primary" onclick="clearCart()">Nueva venta</button>
                        </div>
                    </div>
                </div>

                <div class="cashier-container">
                    <div class="pos-section">
                        <div class="pos-header">
                            <h2 class="pos-title">Punto de Venta</h2>
                            <div class="search-section">
                                <input type="text" class="search-input" placeholder="Buscar producto por nombre..."
                                    id="productSearch" onkeyup="searchProducts()">
                                <button class="btn btn-primary" onclick="searchProducts()">Buscar</button>
                            </div>
                            <div class="barcode-section">
                                <input type="text" class="barcode-input" placeholder="Escanear código de barras..."
                                    id="barcodeInput" onkeydown="handleBarcodeInput(event)">
                                <button class="btn btn-secondary" onclick="addByBarcode()">Agregar</button>
                            </div>
                        </div>

                        <div class="products-grid" id="productsGrid">
                            <!-- Los productos se cargarán aquí -->
                        </div>
                    </div>

                    <div style="display: flex; flex-direction: column; gap: 24px; flex: 1;">
                        <div class="pos-section">
                            <div class="pos-header">
                                <h3 class="pos-title">Carrito de compras</h3>
                            </div>
                            <div class="cart-section">
                                <div class="cart-items" id="cartItems">
                                    <div class="empty-cart">
                                        <p>No hay productos en el carrito</p>
                                        <p style="font-size: 14px; margin-top: 8px;">Busca y agrega productos para
                                            comenzar</p>
                                    </div>
                                </div>

                                <div class="cart-total" id="cartTotal" style="display: none;">
                                    <div class="total-row">
                                        <span>Subtotal:</span>
                                        <span id="subtotal">$0.00</span>
                                    </div>
                                    <div class="total-row">
                                        <span>IVA (19%):</span>
                                        <span id="tax">$0.00</span>
                                    </div>
                                    <div class="total-row total-final">
                                        <span>Total:</span>
                                        <span id="total">$0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="payment-section">
                            <h3 style="margin-bottom: 16px; font-weight: 600;">Método de pago</h3>
                            <div class="payment-methods">
                                <div class="payment-method selected" onclick="selectPayment('efectivo')">
                                    <input type="radio" name="payment" value="efectivo" checked class="payment-radio">
                                    <span>💵 Efectivo</span>
                                </div>
                                <div class="payment-method" onclick="selectPayment('tarjeta')">
                                    <input type="radio" name="payment" value="tarjeta" class="payment-radio">
                                    <span>💳 Tarjeta</span>
                                </div>
                                <div class="payment-method" onclick="selectPayment('transferencia')">
                                    <input type="radio" name="payment" value="transferencia" class="payment-radio">
                                    <span>📱 Transferencia</span>
                                </div>
                            </div>

                            <div id="cashPayment">
                                <label style="display: block; margin-bottom: 8px; font-weight: 500;">Monto
                                    recibido:</label>
                                <input type="number" class="amount-input" id="receivedAmount" placeholder="0.00"
                                    onkeyup="calculateChange()" step="0.01">
                                <div class="change-info" id="changeInfo" style="display: none;">
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>Cambio:</span>
                                        <span id="changeAmount" style="font-weight: 600;">$0.00</span>
                                    </div>
                                </div>
                            </div>

                            <button class="btn-complete" id="completeBtn" onclick="completeSale()" disabled>
                                Completar venta
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Section -->
            <div class="section" id="informes-section">
                <div class="header">
                    <div class="header-top">
                        <h1 class="page-title">Informes de Ventas</h1>
                        <div class="header-actions">
                            <select id="time-range-selector" class="form-input" onchange="updateReports()">
                                <option value="today">Hoy</option>
                                <option value="week">Esta Semana</option>
                                <option value="month">Este Mes</option>
                                <option value="year">Este Año</option>
                            </select>
                            <button class="btn btn-secondary" onclick="exportPDF()">Exportar a PDF</button>
                        </div>
                    </div>
                </div>
            
                <div class="content-area">
                    <div class="stats-grid" id="reports-stats-grid">
                    </div>
            
                    <div class="charts-container">
                        <div class="chart-card">
                            <h3>Ventas por Categoría</h3>
                            <div class="chart-wrapper">
                                <canvas id="category-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>Ventas por Método de Pago</h3>
                            <div class="chart-wrapper">
                                <canvas id="payment-method-chart"></canvas>
                            </div>
                        </div>
                    </div>
            
                    <div class="data-table" style="margin-top: 24px;">
                        <div class="table-header">
                            <h3 class="table-title">Productos Más Vendidos</h3>
                        </div>
                        <div class="table-content">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Producto</th>
                                        <th>Cantidad Vendida</th>
                                        <th>Ingresos Generados</th>
                                    </tr>
                                </thead>
                                <tbody id="best-selling-products-body">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección Productos -->
            <div class="section" id="productos-section">
                <div class="header">
                    <div class="header-top">
                        <h1 class="page-title">Productos</h1>
                        <div class="header-actions">
                            <button class="btn btn-primary" onclick="openProductModal()">Agregar producto</button>
                        </div>
                    </div>
                </div>
                <div class="content-area">
                    <div class="data-table">
                        <div class="table-header">
                            <h3 class="table-title">Listado de productos</h3>
                        </div>
                        <div class="table-content">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Producto</th>
                                        <th>Categoría</th>
                                        <th>Precio</th>
                                        <th>Stock</th>
                                        <th>Código de Barras</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="productsTableBody">
                                    <!-- Los productos se cargarán aquí dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección Clientes -->
            <div class="section" id="clientes-section">
                <div class="header">
                    <div class="header-top">
                        <h1 class="page-title">Clientes</h1>
                        <div class="header-actions">
                            <button class="btn btn-primary" onclick="openClientModal()">Agregar cliente</button>
                        </div>
                    </div>
                </div>
                <div class="content-area">
                    <div class="data-table">
                        <div class="table-header">
                            <h3 class="table-title">Listado de clientes</h3>
                        </div>
                        <div class="table-content">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nombre</th>
                                        <th>Email</th>
                                        <th>Teléfono</th>
                                        <th>Dirección</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="clientsTableBody">
                                    <!-- Los clientes se cargarán aquí dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección Proveedor -->
            <div class="section" id="proveedor-section">
                <div class="header">
                    <div class="header-top">
                        <h1 class="page-title">Proveedores</h1>
                        <div class="header-actions">
                            <button class="btn btn-primary" onclick="openSupplierModal()">Agregar proveedor</button>
                        </div>
                    </div>
                </div>
                <div class="content-area">
                    <div class="data-table">
                        <div class="table-header">
                            <h3 class="table-title">Listado de proveedores</h3>
                        </div>
                        <div class="table-content">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Empresa</th>
                                        <th>Contacto</th>
                                        <th>Email</th>
                                        <th>Teléfono</th>
                                        <th>Dirección</th>
                                        <th>Productos suministrados</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="suppliersTableBody">
                                    <!-- Los proveedores se cargarán aquí dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal para Agregar/Editar Producto -->
            <div class="modal" id="productModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="productModalTitle">Agregar Producto</h2>
                        <button class="modal-close" onclick="closeProductModal()">✖</button>
                    </div>
                    <div class="modal-body">
                        <form id="productForm" onsubmit="saveProduct(event)">
                            <input type="hidden" id="productId">
                            <div class="form-group">
                                <label for="productName" class="form-label">Nombre del producto</label>
                                <input type="text" id="productName" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="productCategory" class="form-label">Categoría</label>
                                <input type="text" id="productCategory" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="productPrice" class="form-label">Precio</label>
                                <input type="number" id="productPrice" class="form-input" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="productStock" class="form-label">Stock</label>
                                <input type="number" id="productStock" class="form-input" required>
                            </div>
                             <div class="form-group">
                                <label for="productBarcode" class="form-label">Código de Barras</label>
                                <input type="text" id="productBarcode" class="form-input" >
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Guardar</button>
                                <button type="button" class="btn btn-secondary"
                                    onclick="closeProductModal()">Cancelar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Modal para Agregar/Editar Cliente -->
            <div class="modal" id="clientModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="clientModalTitle">Agregar Cliente</h2>
                        <button class="modal-close" onclick="closeClientModal()">✖</button>
                    </div>
                    <div class="modal-body">
                        <form id="clientForm" onsubmit="saveClient(event)">
                            <input type="hidden" id="clientId">
                            <div class="form-group">
                                <label for="clientName" class="form-label">Nombre</label>
                                <input type="text" id="clientName" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="clientEmail" class="form-label">Email</label>
                                <input type="email" id="clientEmail" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="clientPhone" class="form-label">Teléfono</label>
                                <input type="tel" id="clientPhone" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="clientAddress" class="form-label">Dirección</label>
                                <input type="text" id="clientAddress" class="form-input">
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Guardar</button>
                                <button type="button" class="btn btn-secondary" onclick="closeClientModal()">Cancelar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Modal para Agregar/Editar Proveedor -->
            <div class="modal" id="supplierModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="supplierModalTitle">Agregar Proveedor</h2>
                        <button class="modal-close" onclick="closeSupplierModal()">✖</button>
                    </div>
                    <div class.modal-body">
                        <form id="supplierForm" onsubmit="saveSupplier(event)">
                            <input type="hidden" id="supplierId">
                            <div class="form-group">
                                <label for="supplierCompany" class="form-label">Nombre de la empresa</label>
                                <input type="text" id="supplierCompany" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="supplierContact" class="form-label">Nombre del contacto</label>
                                <input type="text" id="supplierContact" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="supplierEmail" class="form-label">Email</label>
                                <input type="email" id="supplierEmail" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="supplierPhone" class="form-label">Teléfono</label>
                                <input type="tel" id="supplierPhone" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="supplierAddress" class="form-label">Dirección</label>
                                <input type="text" id="supplierAddress" class="form-input">
                            </div>
                            <div class="form-group">
                                <label for="supplierProducts" class="form-label">Productos suministrados</label>
                                <input type="text" id="supplierProducts" class="form-input">
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Guardar</button>
                                <button type="button" class="btn btn-secondary" onclick="closeSupplierModal()">Cancelar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="main.js"></script>
</body>

</html>